


<%=  (params[:student] && User.find(params[:student]) != current_user) ?  "Vous êtes #{current_user.name} et vous voyez le bilan de #{User.find(params[:student]).name}" : "" %>

<%  params[:student] ?  user = User.find(params[:student]) : user = current_user %>

<h1>Bilan de <%= user.name %></h1>

<table class="table table-striped" id="sortTable">
  <thead>
    <tr>
      <th class="blue header">Compétences</th>
      <th class=" header"></th>
      <th class=" header"></th>
      <th class=" header"></th>
      <th class=" header"></th>
    </tr>
  </thead>
  <tbody>
    <% @competences.each do |competence| %>
    
    <% bilan = competence.bilan(user) %>
     <tr>
       <% params[:student] ? path=bilan_path(competence.contexts.first, :student => user.id) : path=bilan_path(competence.contexts.first) %>
       <td><%= link_to competence.name, path %></td>
       <td><span class="label"><%= bilan[0] %></span> </td>
       <td> <span class="label success"><%= bilan[1] %></span>   </td>
       <td> <span class="label warning"><%= bilan[2] %></span>   </td>
       <td>  <span class="label important"><%= bilan[3] %></span>    </td>

     </tr>
    <% end %>

  </tbody>
</table>

